#pragma checksum "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\Pages\Messages.razor" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "838df5e58c6af16563d67982c640b96d4f03989d"
// <auto-generated/>
#pragma warning disable 1591
namespace LinkedInSalesToolGUI.Pages
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Components;
#nullable restore
#line 1 "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\_Imports.razor"
using System.Net.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\_Imports.razor"
using Microsoft.AspNetCore.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\_Imports.razor"
using Microsoft.AspNetCore.Components.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\_Imports.razor"
using Microsoft.AspNetCore.Components.Forms;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\_Imports.razor"
using Microsoft.AspNetCore.Components.Routing;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\_Imports.razor"
using Microsoft.AspNetCore.Components.Web.Virtualization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\_Imports.razor"
using Microsoft.JSInterop;

#line default
#line hidden
#nullable disable
#nullable restore
#line 9 "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\_Imports.razor"
using LinkedInSalesToolGUI;

#line default
#line hidden
#nullable disable
#nullable restore
#line 10 "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\_Imports.razor"
using LinkedInSalesToolGUI.Shared;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\Pages\Messages.razor"
using LinkedInLib;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\Pages\Messages.razor"
using LinkedInSalesToolGUI.Data;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\Pages\Messages.razor"
using Microsoft.AspNetCore.Components.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\Pages\Messages.razor"
using log4net;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\Pages\Messages.razor"
using Microsoft.Extensions.Logging;

#line default
#line hidden
#nullable disable
    [Microsoft.AspNetCore.Components.RouteAttribute("/Messages")]
    public partial class Messages : Microsoft.AspNetCore.Components.ComponentBase
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
            __builder.AddMarkupContent(0, @"<link rel=""stylesheet"" href=""https://unpkg.com/purecss@2.0.6/build/pure-min.css"" integrity=""sha384-Uu6IeWbM+gzNVXJcM9XV3SohHtmWE+3VGi496jvgX1jyvDTXfdK+rfZc8C1Aehk5"" crossorigin=""anonymous"" b-3bf0iy54mu>
<meta name=""viewport"" content=""width=device-width, initial-scale=1"" b-3bf0iy54mu>");
#nullable restore
#line 14 "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\Pages\Messages.razor"
 if (Startup.databaseManagerSet)
{


#line default
#line hidden
#nullable disable
            __builder.AddMarkupContent(1, @"<style b-3bf0iy54mu>
        div .main {
            padding: 0;
            margin: 0;
            background-color: rgb(75 42 144 / 15%);
            background-size: 48px 48px;
            background-image: radial-gradient( transparent 20px, #ffffff 20px, #ffffff 24px, transparent 24px ), radial-gradient( transparent 20px, #ffffff 20px, #ffffff 24px, transparent 24px );
            background-position: 0 0, 24px 24px;
        }
    </style>");
            __builder.OpenElement(2, "div");
            __builder.AddAttribute(3, "class", "container");
            __builder.AddAttribute(4, "style", "height:85vh; width: 100vw; border:dashed; padding-left:0px; padding-right:0px");
            __builder.AddAttribute(5, "b-3bf0iy54mu");
            __builder.OpenElement(6, "div");
            __builder.AddAttribute(7, "class", "choice-area");
            __builder.AddAttribute(8, "style", "border-right:dotted");
            __builder.AddAttribute(9, "b-3bf0iy54mu");
            __builder.OpenElement(10, "div");
            __builder.AddAttribute(11, "b-3bf0iy54mu");
            __builder.AddMarkupContent(12, "<p b-3bf0iy54mu>Account</p>");
#nullable restore
#line 32 "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\Pages\Messages.razor"
                 if (selectedAccount.Special)
                {

#line default
#line hidden
#nullable disable
            __builder.AddMarkupContent(13, "<p b-3bf0iy54mu>Special account chosen</p>");
#nullable restore
#line 35 "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\Pages\Messages.razor"
                }

#line default
#line hidden
#nullable disable
            __builder.OpenElement(14, "select");
            __builder.AddAttribute(15, "onchange", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.ChangeEventArgs>(this, 
#nullable restore
#line 36 "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\Pages\Messages.razor"
                                    AccountSelected

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(16, "class", "selectpicker");
            __builder.AddAttribute(17, "data-live-search", "true");
            __builder.AddAttribute(18, "b-3bf0iy54mu");
            __builder.OpenElement(19, "option");
            __builder.AddAttribute(20, "value");
            __builder.AddAttribute(21, "selected");
            __builder.AddAttribute(22, "disabled");
            __builder.AddAttribute(23, "b-3bf0iy54mu");
            __builder.AddContent(24, "Select Account");
            __builder.CloseElement();
#nullable restore
#line 38 "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\Pages\Messages.razor"
                     for (int i = 0; i < accountsCreditentials.Count(); i++)
                    {
                        var account = i;
                        if (CheckIfAccountNotify(accountsCreditentials[i].Id).Result)
                        {

#line default
#line hidden
#nullable disable
            __builder.OpenElement(25, "option");
            __builder.AddAttribute(26, "style", "background-color:yellow");
            __builder.AddAttribute(27, "value", 
#nullable restore
#line 43 "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\Pages\Messages.razor"
                                                                            account

#line default
#line hidden
#nullable disable
            );
            __builder.AddAttribute(28, "b-3bf0iy54mu");
            __builder.AddContent(29, 
#nullable restore
#line 43 "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\Pages\Messages.razor"
                                                                                      accountsCreditentials[i].Email

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
#nullable restore
#line 44 "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\Pages\Messages.razor"
                        }
                        else
                        {

#line default
#line hidden
#nullable disable
            __builder.OpenElement(30, "option");
            __builder.AddAttribute(31, "value", 
#nullable restore
#line 47 "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\Pages\Messages.razor"
                                            account

#line default
#line hidden
#nullable disable
            );
            __builder.AddAttribute(32, "b-3bf0iy54mu");
            __builder.AddContent(33, 
#nullable restore
#line 47 "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\Pages\Messages.razor"
                                                      accountsCreditentials[i].Email

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
#nullable restore
#line 48 "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\Pages\Messages.razor"
                        }

                    }

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.AddMarkupContent(34, "\r\n                <hr b-3bf0iy54mu>\r\n                ");
            __builder.AddMarkupContent(35, "<p b-3bf0iy54mu>System status</p>\r\n                ");
            __builder.OpenElement(36, "select");
            __builder.AddAttribute(37, "class", "selectpicker");
            __builder.AddAttribute(38, "data-live-search", "true");
            __builder.AddAttribute(39, "title", "Status");
            __builder.AddAttribute(40, "value", Microsoft.AspNetCore.Components.BindConverter.FormatValue(
#nullable restore
#line 54 "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\Pages\Messages.razor"
                                                                            selectedSystemStatus

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(41, "onchange", Microsoft.AspNetCore.Components.EventCallback.Factory.CreateBinder(this, __value => selectedSystemStatus = __value, selectedSystemStatus));
            __builder.SetUpdatesAttributeName("value");
            __builder.AddAttribute(42, "b-3bf0iy54mu");
            __builder.OpenElement(43, "option");
            __builder.AddAttribute(44, "data-tokens", "show all everything");
            __builder.AddAttribute(45, "b-3bf0iy54mu");
            __builder.AddContent(46, "Show all");
            __builder.CloseElement();
#nullable restore
#line 56 "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\Pages\Messages.razor"
                     for (int i = 0; i < systemStatusesStrings.Count; i++)
                    {

#line default
#line hidden
#nullable disable
            __builder.OpenElement(47, "option");
            __builder.AddAttribute(48, "b-3bf0iy54mu");
            __builder.AddContent(49, 
#nullable restore
#line 58 "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\Pages\Messages.razor"
                                 systemStatusesStrings[i]

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
#nullable restore
#line 59 "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\Pages\Messages.razor"
                    }

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.AddMarkupContent(50, "\r\n                <hr b-3bf0iy54mu>\r\n                ");
            __builder.AddMarkupContent(51, "<p b-3bf0iy54mu>User status</p>\r\n                ");
            __builder.OpenElement(52, "select");
            __builder.AddAttribute(53, "class", "selectpicker");
            __builder.AddAttribute(54, "data-live-search", "true");
            __builder.AddAttribute(55, "title", "Status");
            __builder.AddAttribute(56, "value", Microsoft.AspNetCore.Components.BindConverter.FormatValue(
#nullable restore
#line 63 "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\Pages\Messages.razor"
                                                                            selectedUserStatus

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(57, "onchange", Microsoft.AspNetCore.Components.EventCallback.Factory.CreateBinder(this, __value => selectedUserStatus = __value, selectedUserStatus));
            __builder.SetUpdatesAttributeName("value");
            __builder.AddAttribute(58, "b-3bf0iy54mu");
            __builder.OpenElement(59, "option");
            __builder.AddAttribute(60, "data-tokens", "show all everything");
            __builder.AddAttribute(61, "b-3bf0iy54mu");
            __builder.AddContent(62, "Show all");
            __builder.CloseElement();
#nullable restore
#line 65 "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\Pages\Messages.razor"
                     for (int i = 0; i < userStatusesStrings.Count; i++)
                    {

#line default
#line hidden
#nullable disable
            __builder.OpenElement(63, "option");
            __builder.AddAttribute(64, "b-3bf0iy54mu");
            __builder.AddContent(65, 
#nullable restore
#line 67 "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\Pages\Messages.razor"
                                 userStatusesStrings[i]

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
#nullable restore
#line 68 "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\Pages\Messages.razor"
                    }

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(66, "\r\n            ");
            __builder.OpenElement(67, "div");
            __builder.AddAttribute(68, "class", "Clients");
            __builder.AddAttribute(69, "style", "overflow-y:auto;");
            __builder.AddAttribute(70, "b-3bf0iy54mu");
            __builder.AddMarkupContent(71, "<hr b-3bf0iy54mu>");
#nullable restore
#line 73 "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\Pages\Messages.razor"
                 if (anyAccountSelected)
                {
                    

#line default
#line hidden
#nullable disable
#nullable restore
#line 75 "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\Pages\Messages.razor"
                     for (int i = 0; i < clientDatas.Count; i++)
                    {
                        if ((GetSystemStatus(i) == selectedSystemStatus || selectedSystemStatus == "Show all")
                            && (clientDatas[i].AssignedAccount == selectedAccount.Id || clientDatas[i].AssignedAccount == -1 || clientDatas[i].AssignedAccount == 0)
                            && (GetUserStatus(i) == selectedUserStatus || selectedUserStatus == "Show all"))
                        {
                            var clientNumber = i;
                            if (CheckIfClientNotify(clientDatas[i].Id).Result)
                            {

#line default
#line hidden
#nullable disable
            __builder.OpenElement(72, "div");
            __builder.AddAttribute(73, "class", "client");
            __builder.AddAttribute(74, "style", "border-color:yellow; border-width:3px");
            __builder.AddAttribute(75, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 84 "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\Pages\Messages.razor"
                                                                                                              e => OnClientClick(clientNumber)

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(76, "b-3bf0iy54mu");
            __builder.AddContent(77, 
#nullable restore
#line 85 "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\Pages\Messages.razor"
                                     clientDatas[i].Name

#line default
#line hidden
#nullable disable
            );
            __builder.AddMarkupContent(78, "\r\n                                    <br b-3bf0iy54mu>\r\n                                    System Status: ");
            __builder.AddContent(79, 
#nullable restore
#line 87 "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\Pages\Messages.razor"
                                                    GetSystemStatus(i)

#line default
#line hidden
#nullable disable
            );
            __builder.AddMarkupContent(80, "\r\n                                    <br b-3bf0iy54mu>\r\n                                    User Status: ");
            __builder.AddContent(81, 
#nullable restore
#line 89 "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\Pages\Messages.razor"
                                                  GetUserStatus(i)

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
#nullable restore
#line 91 "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\Pages\Messages.razor"
                            }
                            else
                            {

#line default
#line hidden
#nullable disable
            __builder.OpenElement(82, "div");
            __builder.AddAttribute(83, "class", "client");
            __builder.AddAttribute(84, "style", "");
            __builder.AddAttribute(85, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 94 "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\Pages\Messages.razor"
                                                                         e => OnClientClick(clientNumber)

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(86, "b-3bf0iy54mu");
            __builder.AddContent(87, 
#nullable restore
#line 95 "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\Pages\Messages.razor"
                                     clientDatas[i].Name

#line default
#line hidden
#nullable disable
            );
            __builder.AddMarkupContent(88, "\r\n                                    <br b-3bf0iy54mu>\r\n                                    System Status: ");
            __builder.AddContent(89, 
#nullable restore
#line 97 "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\Pages\Messages.razor"
                                                    GetSystemStatus(i)

#line default
#line hidden
#nullable disable
            );
            __builder.AddMarkupContent(90, "\r\n                                    <br b-3bf0iy54mu>\r\n                                    User Status: ");
            __builder.AddContent(91, 
#nullable restore
#line 99 "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\Pages\Messages.razor"
                                                  GetUserStatus(i)

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
#nullable restore
#line 101 "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\Pages\Messages.razor"

                            }

                        }

                    }

#line default
#line hidden
#nullable disable
#nullable restore
#line 106 "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\Pages\Messages.razor"
                     
                }

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(92, "\r\n        ");
            __builder.OpenElement(93, "div");
            __builder.AddAttribute(94, "class", "chat-area");
            __builder.AddAttribute(95, "style", "overflow-y:scroll;");
            __builder.AddAttribute(96, "id", "chatContainer");
            __builder.AddAttribute(97, "b-3bf0iy54mu");
            __builder.OpenElement(98, "table");
            __builder.AddAttribute(99, "b-3bf0iy54mu");
#nullable restore
#line 112 "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\Pages\Messages.razor"
                 foreach (var messageDetails in messagesDetails)
                {

#line default
#line hidden
#nullable disable
            __builder.OpenElement(100, "tr");
            __builder.AddAttribute(101, "b-3bf0iy54mu");
#nullable restore
#line 115 "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\Pages\Messages.razor"
                         if (messageDetails.Sent_by_client)
                        {
                            

#line default
#line hidden
#nullable disable
            __builder.OpenElement(102, "p");
            __builder.AddAttribute(103, "style", "font-size:large");
            __builder.AddAttribute(104, "b-3bf0iy54mu");
            __builder.OpenElement(105, "div");
            __builder.AddAttribute(106, "class", "msg-container");
            __builder.AddAttribute(107, "style", "background-color: springgreen");
            __builder.AddAttribute(108, "b-3bf0iy54mu");
            __builder.OpenElement(109, "p");
            __builder.AddAttribute(110, "b-3bf0iy54mu");
            __builder.OpenElement(111, "p");
            __builder.AddAttribute(112, "class", "client-name");
            __builder.AddAttribute(113, "b-3bf0iy54mu");
            __builder.AddContent(114, 
#nullable restore
#line 121 "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\Pages\Messages.razor"
                                                                selectedClient.Name

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(115, "\r\n                                        ");
            __builder.AddContent(116, 
#nullable restore
#line 122 "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\Pages\Messages.razor"
                                         messageDetails.Text

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(117, "\r\n                                ");
            __builder.OpenElement(118, "span");
            __builder.AddAttribute(119, "class", "time-right");
            __builder.AddAttribute(120, "b-3bf0iy54mu");
            __builder.AddContent(121, 
#nullable restore
#line 124 "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\Pages\Messages.razor"
                                                           messageDetails.Time

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(122, "\r\n                                <br b-3bf0iy54mu>");
#nullable restore
#line 126 "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\Pages\Messages.razor"
                                 if (messageDetails.Date == "01.01.0001")
                                {

#line default
#line hidden
#nullable disable
            __builder.AddMarkupContent(123, "<span class=\"time-right\" b-3bf0iy54mu> Old message </span>");
#nullable restore
#line 129 "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\Pages\Messages.razor"
                                }
                                else
                                {

#line default
#line hidden
#nullable disable
            __builder.OpenElement(124, "span");
            __builder.AddAttribute(125, "class", "time-right");
            __builder.AddAttribute(126, "b-3bf0iy54mu");
            __builder.AddContent(127, 
#nullable restore
#line 132 "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\Pages\Messages.razor"
                                                               messageDetails.Date

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
#nullable restore
#line 133 "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\Pages\Messages.razor"
                                }

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.CloseElement();
#nullable restore
#line 136 "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\Pages\Messages.razor"
                                   
                        }
                        else
                        {

#line default
#line hidden
#nullable disable
            __builder.OpenElement(128, "p");
            __builder.AddAttribute(129, "style", "font-size:large");
            __builder.AddAttribute(130, "b-3bf0iy54mu");
            __builder.OpenElement(131, "div");
            __builder.AddAttribute(132, "class", "msg-container");
            __builder.AddAttribute(133, "style", "background-color:deepskyblue; float:right; width: 70%");
            __builder.AddAttribute(134, "b-3bf0iy54mu");
            __builder.OpenElement(135, "p");
            __builder.AddAttribute(136, "class", "client-name");
            __builder.AddAttribute(137, "b-3bf0iy54mu");
            __builder.AddContent(138, 
#nullable restore
#line 142 "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\Pages\Messages.razor"
                                                            selectedAccount.Name

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(139, "\r\n                                    ");
            __builder.AddContent(140, 
#nullable restore
#line 143 "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\Pages\Messages.razor"
                                     messageDetails.Text

#line default
#line hidden
#nullable disable
            );
            __builder.AddMarkupContent(141, "\r\n                                    <br b-3bf0iy54mu>\r\n\r\n                                    ");
            __builder.OpenElement(142, "span");
            __builder.AddAttribute(143, "class", "time-right");
            __builder.AddAttribute(144, "b-3bf0iy54mu");
            __builder.AddContent(145, 
#nullable restore
#line 146 "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\Pages\Messages.razor"
                                                               messageDetails.Time

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(146, "\r\n                                    <br b-3bf0iy54mu>");
#nullable restore
#line 148 "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\Pages\Messages.razor"
                                     if (messageDetails.Date == "01.01.0001")
                                    {

#line default
#line hidden
#nullable disable
            __builder.AddMarkupContent(147, "<span class=\"time-right\" b-3bf0iy54mu> Old message </span>");
#nullable restore
#line 151 "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\Pages\Messages.razor"
                                    }
                                    else
                                    {

#line default
#line hidden
#nullable disable
            __builder.OpenElement(148, "span");
            __builder.AddAttribute(149, "class", "time-right");
            __builder.AddAttribute(150, "b-3bf0iy54mu");
            __builder.AddContent(151, 
#nullable restore
#line 154 "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\Pages\Messages.razor"
                                                                   messageDetails.Date

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
#nullable restore
#line 155 "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\Pages\Messages.razor"
                                    }

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.CloseElement();
#nullable restore
#line 158 "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\Pages\Messages.razor"
                        }

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.AddMarkupContent(152, "\r\n                        <br b-3bf0iy54mu>");
#nullable restore
#line 162 "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\Pages\Messages.razor"
                    }

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(153, "\r\n            ");
            __builder.OpenElement(154, "div");
            __builder.AddAttribute(155, "class", "chat-top");
            __builder.AddAttribute(156, "style", "border-bottom: dotted");
            __builder.AddAttribute(157, "b-3bf0iy54mu");
            __builder.OpenElement(158, "div");
            __builder.AddAttribute(159, "style", "float:left");
            __builder.AddAttribute(160, "b-3bf0iy54mu");
            __builder.AddMarkupContent(161, "\r\n                    Client:\r\n");
#nullable restore
#line 168 "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\Pages\Messages.razor"
                     if (anyClientSelected)
                    {
                        

#line default
#line hidden
#nullable disable
            __builder.AddContent(162, 
#nullable restore
#line 170 "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\Pages\Messages.razor"
                         selectedClient.Name

#line default
#line hidden
#nullable disable
            );
            __builder.AddMarkupContent(163, "<br b-3bf0iy54mu>");
            __builder.AddContent(164, "status: ");
            __builder.AddContent(165, 
#nullable restore
#line 172 "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\Pages\Messages.razor"
                                       SelectedUserStatus

#line default
#line hidden
#nullable disable
            );
            __builder.AddMarkupContent(166, " \r\n                        ");
            __builder.OpenElement(167, "select");
            __builder.AddAttribute(168, "onchange", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.ChangeEventArgs>(this, 
#nullable restore
#line 173 "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\Pages\Messages.razor"
                                            UserStatusSelected

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(169, "class", "selectpicker");
            __builder.AddAttribute(170, "data-live-search", "true");
            __builder.AddAttribute(171, "b-3bf0iy54mu");
            __builder.OpenElement(172, "option");
            __builder.AddAttribute(173, "selected");
            __builder.AddAttribute(174, "disabled");
            __builder.AddAttribute(175, "b-3bf0iy54mu");
            __builder.AddContent(176, "Change status");
            __builder.CloseElement();
            __builder.AddMarkupContent(177, "\r\n                            ");
            __builder.OpenElement(178, "option");
            __builder.AddAttribute(179, "value", "Add new status");
            __builder.AddAttribute(180, "b-3bf0iy54mu");
            __builder.AddContent(181, "Add new status");
            __builder.CloseElement();
            __builder.AddMarkupContent(182, "\r\n                            ");
            __builder.OpenElement(183, "option");
            __builder.AddAttribute(184, "value", "0");
            __builder.AddAttribute(185, "b-3bf0iy54mu");
            __builder.AddContent(186, "Unassigned");
            __builder.CloseElement();
#nullable restore
#line 177 "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\Pages\Messages.razor"
                             for (int i = 1; i < userStatusesStrings.Count(); i++)
                            {
                                var statusId = i;

#line default
#line hidden
#nullable disable
            __builder.OpenElement(187, "option");
            __builder.AddAttribute(188, "value", 
#nullable restore
#line 180 "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\Pages\Messages.razor"
                                                statusId

#line default
#line hidden
#nullable disable
            );
            __builder.AddAttribute(189, "b-3bf0iy54mu");
            __builder.AddContent(190, 
#nullable restore
#line 180 "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\Pages\Messages.razor"
                                                           userStatusesStrings[i]

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
#nullable restore
#line 181 "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\Pages\Messages.razor"
                            }

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
#nullable restore
#line 183 "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\Pages\Messages.razor"

                    }
                    else
                    {
                        

#line default
#line hidden
#nullable disable
            __builder.AddContent(191, "not selected");
#nullable restore
#line 187 "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\Pages\Messages.razor"
                                                 
                    }

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.AddMarkupContent(192, "\r\n                ");
            __builder.OpenElement(193, "div");
            __builder.AddAttribute(194, "style", "float:right");
            __builder.AddAttribute(195, "b-3bf0iy54mu");
            __builder.AddMarkupContent(196, "\r\n                    Account:\r\n");
#nullable restore
#line 193 "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\Pages\Messages.razor"
                     if (anyAccountSelected)
                    {
                        

#line default
#line hidden
#nullable disable
            __builder.AddContent(197, 
#nullable restore
#line 195 "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\Pages\Messages.razor"
                         selectedAccount.Name

#line default
#line hidden
#nullable disable
            );
            __builder.AddMarkupContent(198, "<br b-3bf0iy54mu>");
#nullable restore
#line 197 "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\Pages\Messages.razor"
                        if (anyClientSelected)
                        {

#line default
#line hidden
#nullable disable
            __builder.OpenElement(199, "button");
            __builder.AddAttribute(200, "disabled", 
#nullable restore
#line 199 "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\Pages\Messages.razor"
                                               sendingMessage

#line default
#line hidden
#nullable disable
            );
            __builder.AddAttribute(201, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 199 "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\Pages\Messages.razor"
                                                                           FixIncorrectData

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(202, "class", "pure-button");
            __builder.AddAttribute(203, "style", "align-self:flex-end; float:right; right: 5px; font-size: 80%");
            __builder.AddAttribute(204, "b-3bf0iy54mu");
            __builder.AddMarkupContent(205, "<i class=\"fas fa-sync\" b-3bf0iy54mu></i> resynchronise\r\n                            ");
            __builder.CloseElement();
#nullable restore
#line 202 "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\Pages\Messages.razor"
                        }
                    }
                    else
                    {
                        

#line default
#line hidden
#nullable disable
            __builder.AddContent(206, "not selected");
#nullable restore
#line 206 "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\Pages\Messages.razor"
                                                 
                    }

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(207, "\r\n            ");
            __builder.OpenElement(208, "div");
            __builder.AddAttribute(209, "class", "chat-new-message-area");
            __builder.AddAttribute(210, "style", "border-top:dotted; display:table; position:relative; max-height:150px");
            __builder.AddAttribute(211, "b-3bf0iy54mu");
            __builder.OpenElement(212, "textarea");
            __builder.AddAttribute(213, "style", "width:100%; resize:none; height:150px; padding:0px");
            __builder.AddAttribute(214, "placeholder", "Message");
            __builder.AddAttribute(215, "maxlength", "8000");
            __builder.AddAttribute(216, "value", Microsoft.AspNetCore.Components.BindConverter.FormatValue(
#nullable restore
#line 212 "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\Pages\Messages.razor"
                                 messageText

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(217, "onchange", Microsoft.AspNetCore.Components.EventCallback.Factory.CreateBinder(this, __value => messageText = __value, messageText));
            __builder.SetUpdatesAttributeName("value");
            __builder.AddAttribute(218, "b-3bf0iy54mu");
            __builder.CloseElement();
            __builder.AddMarkupContent(219, "\r\n                ");
            __builder.OpenElement(220, "button");
            __builder.AddAttribute(221, "disabled", 
#nullable restore
#line 213 "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\Pages\Messages.razor"
                                   sendingMessage

#line default
#line hidden
#nullable disable
            );
            __builder.AddAttribute(222, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 213 "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\Pages\Messages.razor"
                                                               FixIncorrectData

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(223, "class", "pure-button");
            __builder.AddAttribute(224, "style", "position:absolute; bottom:15px; right:10px");
            __builder.AddAttribute(225, "b-3bf0iy54mu");
            __builder.AddMarkupContent(226, "<i class=\"far fa-comment-alt\" b-3bf0iy54mu></i> send\r\n                ");
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
#nullable restore
#line 218 "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\Pages\Messages.razor"
}
else
{

#line default
#line hidden
#nullable disable
            __builder.AddMarkupContent(227, "<h1 b-3bf0iy54mu>Chat</h1>\r\n    ");
            __builder.AddMarkupContent(228, "<p style=\"color:red\" b-3bf0iy54mu>Cannot load chat without database connection!</p>");
#nullable restore
#line 223 "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\Pages\Messages.razor"
}

#line default
#line hidden
#nullable disable
        }
        #pragma warning restore 1998
#nullable restore
#line 224 "C:\Programming\Projects\LinkedInLib\LinkedInSalesToolGUI\LinkedInSalesToolGUI\Pages\Messages.razor"
       
    private List<AccountCreditentials> accountsCreditentials;
    private List<ClientData> clientDatas;
    private List<MessageDetails> messagesDetails = new List<MessageDetails>();
    private List<int> systemStatuses = new List<int>();
    private List<int> userStatuses = new List<int>();
    private List<string> systemStatusesStrings = new List<string>();
    private List<string> userStatusesStrings = new List<string>();
    private AccountCreditentials selectedAccount;
    private ClientData selectedClient;
    private string selectedSystemStatus = "Show all";
    private string selectedUserStatus = "Show all";
    private bool anyAccountSelected = false;
    private bool anyClientSelected = false;
    private bool sendingMessage = false;
    private string messageText = null;
    private string SelectedUserStatus { get; set; } = "Unassigned";

    protected override async Task OnInitializedAsync()
    {
        if (Startup.databaseManagerSet)
        {
            accountsCreditentials = await dbService.GetAccountsAsync();
            clientDatas = await dbService.GetClientsAsync();
            systemStatusesStrings = await dbService.GetSystemStatusesStrings();
            userStatusesStrings = await dbService.GetUserStatusesStrings();

        }
    }

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {

        if (Startup.databaseManagerSet) await JsRuntime.InvokeVoidAsync("ScrollToBottom", "chatContainer");

    }

    private async Task OnClientClick(int clientNumber)
    {
        if (!anyClientSelected)
        {
            anyClientSelected = true;
        }

        selectedClient = clientDatas[clientNumber];
        await GetMessagesWithClient();
        SelectedUserStatus = userStatusesStrings[userStatuses[clientNumber]];
        await dbService.SetNotify(selectedAccount.Id, selectedClient.Id, false);
        StateHasChanged();
    }

    private async Task AccountSelected(ChangeEventArgs e)
    {
        if (!anyAccountSelected)
        {
            anyAccountSelected = true;
        }

        selectedAccount = accountsCreditentials[Convert.ToInt32(e.Value.ToString())];
        systemStatuses.Clear();
        userStatuses.Clear();
        foreach (var clientData in clientDatas)
        {
            int userStatus = await dbService.GetUserStatusId(selectedAccount.Id, clientData.Id);
            int systemStatus = await dbService.GetSystemStatusId(selectedAccount.Id, clientData.Id);
            systemStatuses.Add(systemStatus);
            userStatuses.Add(userStatus);
        }

        StateHasChanged();
    }

    private string GetSystemStatus(int clientId)
    {
        return systemStatusesStrings[systemStatuses[clientId] - 1];
    }

    private string GetUserStatus(int clientId)
    {
        return userStatusesStrings[userStatuses[clientId]];
    }

    private async Task GetMessagesWithClient()
    {
        messagesDetails = await dbService.GetMessages(selectedAccount.Id, selectedClient.Id);
    }

    private async Task SendMessage(string message)
    {
        if (!string.IsNullOrEmpty(message) && anyAccountSelected && anyClientSelected && !sendingMessage)
        {
            sendingMessage = true;
            await dbService.SendMessage(selectedAccount, selectedClient.Id, message);
            sendingMessage = false;
            messageText = null;
            await GetMessagesWithClient();
            StateHasChanged();
        }
        else if (sendingMessage)
        {
            await JsRuntime.InvokeAsync<bool>("alert", "Message is currently being sent, please wait."); // Confirm
        }
        else if (string.IsNullOrEmpty(message))
        {
            await JsRuntime.InvokeAsync<bool>("alert", "Cannot send an empty message!");
        }
        else
        {
            await JsRuntime.InvokeAsync<bool>("alert", "Please choose an account and a client!");
        }
    }

    private async Task UserStatusSelected(ChangeEventArgs e)
    {

        if (e.Value.ToString() == "Add new status")
        {
            string prompt = await JsRuntime.InvokeAsync<string>("prompt", "Type new user status:"); // Prompt
            if (await dbService.InsertUserStatus(prompt)) userStatusesStrings = await dbService.GetUserStatusesStrings();
        }
        else if (Convert.ToInt32(e.Value.ToString()) == 0)
        {
            //unassign
            await dbService.UnassignUserStatus(selectedAccount.Id, selectedClient.Id);
            SelectedUserStatus = userStatusesStrings[Convert.ToInt32(e.Value.ToString())];
        }
        else
        {
            await dbService.ChangeUserStatus(selectedAccount.Id, selectedClient.Id, await dbService.GetUserStatusId(userStatusesStrings[Convert.ToInt32(e.Value.ToString())]));
            SelectedUserStatus = userStatusesStrings[Convert.ToInt32(e.Value.ToString())];
        }
    }

    private int FindAccountInList(AccountCreditentials accountCreditentials)
    {
        for (int i = 0; i < accountsCreditentials.Count; i++)
        {
            if (accountsCreditentials[i].Id == accountCreditentials.Id) return i;
        }

        return -1;
    }

    private async Task FixIncorrectData()
    {
        //await dbService.FixIncorrectData(selectedClient, selectedAccount).ContinueWith(t => GetMessagesWithClient());
        await dbService.FixIncorrectData(selectedClient, selectedAccount);
        await GetMessagesWithClient();

    }

    private async Task<bool> CheckIfClientNotify(int id)
    {
        return await dbService.CheckIfClientNotify(id);
    }

    private async Task<bool> CheckIfAccountNotify(int id)
    {
        return await dbService.CheckIfAccountNotify(id);

    }

#line default
#line hidden
#nullable disable
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private IJSRuntime JsRuntime { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private DatabaseService dbService { get; set; }
    }
}
#pragma warning restore 1591
